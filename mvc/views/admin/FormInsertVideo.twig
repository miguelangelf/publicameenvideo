

<script>
    $(function () {
        $("#expirationpicker").datepicker();
    });
</script>

<script>


    var idoflist;

    $(function () {
        var availableTags = [
            {"idselected": "1", "label": "Aragorn", "actor": "Viggo Mortensen"},
            {"idselected": "2", "label": "Arwen", "actor": "Liv Tyler"},
            {"idselected": "3", "label": "Bilbo Baggins", "actor": "Ian Holm"},
            {"idselected": "5", "label": "Boromir", "actor": "Sean Bean"},
            {"idselected": "4", "label": "Frodo Baggins", "actor": "Elijah Wood"},
            {"idselected": "5", "label": "Gandalf", "actor": "Ian McKellen"},
            {"idselected": "6", "label": "Gimli", "actor": "John Rhys-Davies"},
            {"idselected": "100", "label": "Gollum", "actor": "Andy Serkis"},
            {"idselected": "102", "label": "Legolas", "actor": "Orlando Bloom"},
            {"idselected": "155", "label": "Meriadoc Merry Brandybuck", "actor": "Dominic Monaghan"},
            {"idselected": "600", "label": "Peregrin Pippin Took", "actor": "Billy Boyd"},
            {"idselected": "954", "label": "Samwise Gamgee", "actor": "Sean Astin", otro: "milindaex"}
        ];



        var MIN_LENGTH = 0;
        $(document).ready(function () {
            $("#tags").keyup(function () {
                var keyword = $("#tags").val();
                if (keyword.length >= MIN_LENGTH) {
                    $.post("/site/admin/availablecompanies", {name: keyword})
                            .done(function (data) {
                                var opciones = jQuery.parseJSON(data);
                                availableTags = opciones;

                                // console.log(opciones);
                                //   console.log(availableTags);

                                $(function () {

                                    $("#tags").autocomplete(
                                            {
                                                source: availableTags,
                                                select: function (event, ui) {
                                                    $("#tags").val(ui.item.label + "  (" + ui.item.idselected + ") ");

                                                    idoflist = ui.item.idselected;
                                                    nameoflist = ui.item.label;
                                                    $("#selecteduser").html(nameoflist);
                                                    //alert(idoflist);

                                                    return false;
                                                }
                                            });


                                });


                            });
                }
            });

        });










        /*
         $("#tags").autocomplete({
         source: availableTags
         
         });
         
         */
    });
</script>






<form class="form-horizontal">





    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Apellido</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="fuapellido" placeholder="Email">
        </div>
    </div>



    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Repetir Contraseña</label>
        <div class="col-sm-10">
            <input type="password" class="form-control" id="fucon2" placeholder="Email">
        </div>
    </div>


    <style>
        .ui-widget { 
            z-index: 5000;
        }

    </style>





    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Compañia</label>
        <div class="col-sm-10">
            <input type="text" class="form-control" id="tags" placeholder="Email">
        </div>
    </div>


    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Usuario Seleccionado</label>
        <div class="col-sm-10">
            <span class="form-control" id="selecteduser" disabled ></span>
        </div>
    </div>
    
     <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Vigencia</label>
        <div class="col-sm-10">
            <input type="text" id="expirationpicker" readonly>
        </div>
    </div>






    <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">Fotografia</label>

        <span class="btn btn-success fileinput-button">
            <i class="glyphicon glyphicon-plus"></i>
            <span>Seleccionar Fotografia...</span>
            <!-- The file input field used as target for the file upload widget -->
            <input id="fileupload" type="file" name="files[]" multiple>
        </span>
        <br/><br/>
        <div id="progress" class="progress">
            <div class="progress-bar progress-bar-success"></div>
        </div>

    </div>


    <input value="" type="hidden" id="photoname" />

</div>


</form>














<script>

    $(function () {
        // alert("HOLA");
        'use strict';
        // Change this to the location of your server-side upload handler:
        var url = "/site/admin/subirarchivo";

        $('#fileupload').on('click', function ()
        {
            var progress = parseInt(0 / 1 * 100, 10);
            $('#progress .progress-bar').css(
                    'width',
                    progress + '%'
                    );
        });

        $('#fileupload').fileupload({
            url: url,
            dataType: 'json',
            done: function (e, data) {
                $.each(data.result.files, function (index, file) {
                    // alert(file.name);

                    // alert(file.error);
                    // alert(file.lastModifiedDate);
                    $("#photoname").val(file.name);
                });
            },
            progressall: function (e, data) {
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $('#progress .progress-bar').css(
                        'width',
                        progress + '%'
                        );
            }
        }).prop('disabled', !$.support.fileInput)
                .parent().addClass($.support.fileInput ? undefined : 'disabled');
    });


</script>